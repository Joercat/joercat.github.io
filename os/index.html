<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCos 1.1</title>
    <link rel="icon" type="image/png" href="SClogo.png">
    <style>
body {
    background-color: #f0f0f0;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.computer {
    width: 800px;
    height: 600px;
    background-color: #333;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    overflow: hidden;
}

.screen {
    width: 100%;
    height: 560px;
    background-color: #000;
    position: relative;
    overflow: auto;
}

.pad {
    width: 100%;
    height: 100%;
    padding: 25px;
    box-sizing: border-box;
    position: relative;
}

.taskbar {
    height: 40px;
    background-color: #1a1a1a;
    display: flex;
    align-items: center;
    padding: 0 10px;
}

.start-button {
    background-color: #39FF14;
    color: black;
    border: none;
    padding: 10px 5px;
    border-radius: 3px;
    cursor: pointer;
    width: 65px;
    height: 55px;
    margin-top: -5000%;
}
.start-button:hover {
    width: 63px;
    height: 52px;
}

input, button {
    margin: 5px;
    padding: 5px;
}

.output-bar {
    margin-top: 10px;
    padding: 5px;
    background-color: #111;
    color: #0f0;
    font-family: 'Courier New', monospace;
    border: 1px solid #444;
    height: 60px;
    overflow-y: auto;
}

#loading-screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: black;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    color: #0f0;
}

.app {
    display: none;
    margin-bottom: 20px;
    color: #0f0;
    background-color: #222;
    border: 1px solid #444;
    padding: 10px;
    position: absolute;
    top: 50px;
    left: 50px;
    width: 80%;
    height: 80%;
    overflow: auto;
}

.app-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.close-button {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 3px;
    cursor: pointer;
}

.desktop-icon {
    display: inline-block;
    text-align: center;
    margin: 10px;
    cursor: pointer;
    color: #fff;
}

.desktop-icon img {
    width: 48px;
    height: 48px;
}

.desktop-icon img:hover {
    width: 46px;
    height: 46px;
}

.app-store-container {
    padding: 15px;
    height: calc(100% - 120px);
    overflow-y: auto;
}

.app-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 20px;
}

.store-app {
    background: #333;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    cursor: pointer;
    border: 1px solid #444;
    transition: transform 0.2s;
}

.store-app:hover {
    transform: scale(1.05);
}

.store-app img {
    width: 64px;
    height: 64px;
    margin-bottom: 10px;
}

.store-app button {
    background: #0078d7;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 4px;
    margin-top: 10px;
    cursor: pointer;
}

.start-menu {
    width: 80%;
    height: 70%;
    position: absolute;
    bottom: 40px;
    left: 10px;
    background: #222;
    border: 1px solid #444;
    border-radius: 4px;
    overflow: hidden;
    display: none;
    z-index: 1000;
    min-width: 200px;
}

.menu-item {
    padding: 12px 20px;
    color: #fff;
    cursor: pointer;
    transition: background 0.2s;
}

.menu-item:hover {
    background: #444;
}

.logo {
    width: 35px;
    height: 36px;
    margin-top: 12%;
    margin-left: 1050%;
}

.time {
    margin-bottom: 8.5%;
    margin-left: 77.5%;
    color: #39FF14;
    font-size: 12px;
    z-index: 1000;
}

.boot {
    width: 35px;
    height: 36px;
    margin-left: 5%;
}

.iframe-container {
    display: none;
    width: 100%;
    height: calc(100% - 50px);
}

.iframe-container.active {
    display: block;
}

.settings-container {
    padding: 10px;
    max-height: 300px;
    overflow-y: auto;
}

.setting-group {
    background: #222;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 10px;
}

.profile-section {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
}

.data-controls {
    display: flex;
    gap: 5px;
}

.theme-section {
    margin-top: 15px;
}

#set {
    width: 300px;
    height: auto;
    margin-left: 50%;
    margin-top: 8%;
    min-height: 200px;
    max-height: 400px;
}

    </style>
</head>
<body>
    <div class="computer">
        <div class="screen">
            <div class="pad">
                <div id="loading-screen">
                    <h1>SC os</h1>
                    <p>1.1</p>
                    <img class="boot" type="image/png" src="SClogo.png" alt="SC logo">
                </div>

                <!-- Desktop Icons -->
 <div class="desktop-icon">
            <button class="start-button"><strong>Account Settings</strong></button>
<div>Account</div>
</div>

                <div class="desktop-icon" onclick="showApp('calculator')">
                    <img src="https://cdn-icons-png.flaticon.com/512/891/891175.png" alt="Calculator">
                    <div>Calculator</div>
                </div>
                <div class="desktop-icon" onclick="showApp('memory')">
                    <img src="https://cdn-icons-png.flaticon.com/512/1665/1665680.png" alt="Memory">
                    <div>Memory</div>
                </div>
                <div class="desktop-icon" onclick="showApp('internet')">
                    <img src="https://cdn-icons-png.flaticon.com/512/2985/2985995.png" alt="Internet">
                    <div>Internet</div>
                </div>
                <div class="desktop-icon" onclick="showApp('games')">
                    <img src="https://cdn-icons-png.flaticon.com/512/3097/3097980.png" alt="Games">
                    <div>Games</div>
                </div>
                <div class="desktop-icon" onclick="showApp('appstore')">
                    <img src="https://cdn-icons-png.flaticon.com/512/3081/3081183.png" alt="App Store">
                    <div>App Store</div>
                </div>

                <!-- Apps -->
                <div id="calculator" class="app">
                    <div class="app-header">
                        <h2>Calculator</h2>
                        <button class="close-button" onclick="closeApp('calculator')">X</button>
                    </div>
                    <div>
                        <input type="number" id="num1" placeholder="Number 1">
                        <input type="number" id="num2" placeholder="Number 2">
                    </div>
                    <div>
                        <button onclick="compute('add')">Add</button>
                        <button onclick="compute('subtract')">Subtract</button>
                        <button onclick="compute('multiply')">Multiply</button>
                        <button onclick="compute('divide')">Divide</button>
                    </div>
                    <div class="output-bar" id="calculator-output"></div>
                </div>

                <div id="memory" class="app">
                    <div class="app-header">
                        <h2>Memory Storage</h2>
                        <button class="close-button" onclick="closeApp('memory')">X</button>
                    </div>
                    <div>
                        <input type="text" id="memoryKey" placeholder="Memory Storage Key">
                        <input type="text" id="memoryValue" placeholder="What do you want saved?">
                    </div>
                    <div>
                        <button onclick="setMemory()">Set Memory</button>
                        <button onclick="getMemory()">Get Memory</button>
                    </div>
                    <div class="output-bar" id="memory-output"></div>
                </div>

                <div id="internet" class="app">
                    <div class="app-header">
                        <h2>Internet</h2>
                        <button class="close-button" onclick="closeApp('internet')">X</button>
                    </div>
                    <div>
                        <button onclick="switchIframe('google')">Google</button>
                        <button onclick="switchIframe('tucnet')">TUC net (beta)</button>
                    </div>
                    <div id="google-frame" class="iframe-container">
                        <iframe src="https://www.google.com/webhp?igu=1" width="100%" height="110%"></iframe>
                    </div>
                    <div id="tucnet-frame" class="iframe-container">
                        <iframe src="https://cybertoilet.github.io" width="100%" height="100%"></iframe>
                    </div>
                </div>

                <div id="games" class="app">
                    <div class="app-header">
                        <h2>Games</h2>
                        <button class="close-button" onclick="closeApp('games')">X</button>
                    </div>
                    <button onclick="openUnblockedCat()">Open Unblocked Cat</button>
                    <iframe id="game-frame" src="about:blank" width="100%" height="calc(100% - 80px)"></iframe>
                </div>

                <div id="appstore" class="app">
                    <div class="app-header">
                        <h2>App Store</h2>
                        <button class="close-button" onclick="closeApp('appstore')">X</button>
                    </div>
                    <div class="app-store-container">
                        <div class="app-list" id="available-apps"></div>
                    </div>
                    <div class="output-bar" id="appstore-output"></div>
                </div>
            </div>
        </div>

<div id="set" class="app">
    <div class="app-header">
        <h2>Account Settings</h2>
        <button class="close-button" onclick="closeApp('set')">X</button>
    </div>

    <div class="settings-container">
        <div class="setting-group">

            <h3>User Profile</h3>
            <div class="profile-section">
                <input type="text" id="username" placeholder="Username">
                <button onclick="saveUsername()">Save</button>
                <div class="data-controls">
                    <button onclick="exportUserData()">Export Data</button>
                    <button onclick="importUserData()">Import Data</button>
                </div>
            </div>
            <div class="theme-section">
                <h3>Theme</h3>
                <select id="theme-selector" onchange="changeTheme()">
                    <option value="default">Default</option>
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                </select>
            </div>
        </div>
    </div>
</div>


        <div class="taskbar">
            <center><img class="logo" type="image/png" src="SClogo.png" alt="SC logo"></center>
            <div class="time">
                <span id="current-date"></span>
            </div>
        </div>
    </div>
<script>
 const availableApps = [
    {
        id: 'text-editor',
        name: 'Text Editor',
        icon: 'https://cdn-icons-png.flaticon.com/512/3022/3022353.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Text Editor</h2>
                <button class="close-button" onclick="closeApp('text-editor')">X</button>
            </div>
            <textarea id="editor-content" style="width: 100%; height: 80%; background: #333; color: #0f0; border: 1px solid #444;"></textarea>
            <button onclick="saveText()">Save</button>
            <div class="output-bar" id="text-editor-output"></div>
        `
    },
    {
        id: 'music-player',
        name: 'Music Player',
        icon: 'https://cdn-icons-png.flaticon.com/512/2995/2995101.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Music Player</h2>
                <button class="close-button" onclick="closeApp('music-player')">X</button>
            </div>
            <div style="padding: 20px;">
                <audio id="audio-player" controls>
                    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
                </audio>
            </div>
        `
    },
    {
        id: 'paint',
        name: 'Paint',
        icon: 'https://cdn-icons-png.flaticon.com/512/1156/1156949.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Paint</h2>
                <button class="close-button" onclick="closeApp('paint')">X</button>
            </div>
            <canvas id="paint-canvas" style="background: white;"></canvas>
            <div>
                <input type="color" id="color-picker">
                <input type="range" id="brush-size" min="1" max="50" value="5">
            </div>
        `
    },
    {
        id: 'terminal',
        name: 'Terminal',
        icon: 'https://cdn-icons-png.flaticon.com/512/906/906324.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Terminal</h2>
                <button class="close-button" onclick="closeApp('terminal')">X</button>
            </div>
            <div id="terminal-output" style="height: 80%; overflow-y: auto; background: #000; color: #0f0; padding: 10px;"></div>
            <input type="text" id="terminal-input" style="width: 100%; background: #000; color: #0f0; border: 1px solid #444;">
        `
    },
    {
        id: 'clock',
        name: 'Clock',
        icon: 'https://cdn-icons-png.flaticon.com/512/2784/2784459.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Clock</h2>
                <button class="close-button" onclick="closeApp('clock')">X</button>
            </div>
            <div id="clock-display" style="font-size: 48px; text-align: center; margin-top: 20px;"></div>
            <div id="stopwatch" style="text-align: center; margin-top: 20px;">
                <div id="stopwatch-display">00:00:00</div>
                <button onclick="startStopwatch()">Start</button>
                <button onclick="stopStopwatch()">Stop</button>
                <button onclick="resetStopwatch()">Reset</button>
            </div>
        `
    },
    {
        id: 'notes',
        name: 'Notes',
        icon: 'https://cdn-icons-png.flaticon.com/512/3075/3075908.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Notes</h2>
                <button class="close-button" onclick="closeApp('notes')">X</button>
            </div>
            <div id="notes-list"></div>
            <input type="text" id="new-note" placeholder="New note">
            <button onclick="addNote()">Add Note</button>
        `
    },
    {
        id: 'calculator-pro',
        name: 'Calculator Pro',
        icon: 'https://cdn-icons-png.flaticon.com/512/891/891175.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Calculator Pro</h2>
                <button class="close-button" onclick="closeApp('calculator-pro')">X</button>
            </div>
            <div class="calculator-grid">
                <!-- Advanced calculator buttons and display -->
            </div>
        `
    },
    {
        id: 'file-explorer',
        name: 'File Explorer',
        icon: 'https://cdn-icons-png.flaticon.com/512/1383/1383397.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>File Explorer</h2>
                <button class="close-button" onclick="closeApp('file-explorer')">X</button>
            </div>
            <div id="file-system"></div>
            <input type="text" id="new-file-name">
            <button onclick="createFile()">Create File</button>
        `
    },
    {
        id: 'weather',
        name: 'Weather',
        icon: 'https://cdn-icons-png.flaticon.com/512/1163/1163661.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Weather</h2>
                <button class="close-button" onclick="closeApp('weather')">X</button>
            </div>
            <input type="text" id="city-input" placeholder="Enter city name">
            <button onclick="getWeather()">Get Weather</button>
            <div id="weather-display"></div>
        `
    },
    {
        id: 'camera',
        name: 'Camera',
        icon: 'https://cdn-icons-png.flaticon.com/512/3004/3004613.png',
        installed: false,
        content: `
            <div class="app-header">
                <h2>Camera</h2>
                <button class="close-button" onclick="closeApp('camera')">X</button>
            </div>
            <video id="camera-feed" autoplay></video>
            <button onclick="takePhoto()">Take Photo</button>
            <canvas id="photo-canvas" style="display: none;"></canvas>
        `
    }
];


        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
            }, 5000);

            makeAppsDraggable();
        });

        // App management
        function showApp(appId) {
            const app = document.getElementById(appId);
            if (app) {
                app.style.display = 'block';
                app.style.zIndex = getNextZIndex();
            }
        }

        function closeApp(appId) {
            const app = document.getElementById(appId);
            if (app) {
                app.style.display = 'none';
            }
        }

        // Calculator functionality
        function calculate(operation) {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            let result;

            switch(operation) {
                case 'add': result = num1 + num2; break;
                case 'subtract': result = num1 - num2; break;
                case 'multiply': result = num1 * num2; break;
                case 'divide': result = num2 !== 0 ? num1 / num2 : 'Cannot divide by zero'; break;
            }

            document.getElementById('calc-output').textContent = `Result: ${result}`;
        }

        // Notepad functionality
        function saveNote() {
            const text = document.getElementById('notepad-text').value;
            document.getElementById('notepad-output').textContent = 'Note saved!';
            localStorage.setItem('saved-note', text);
        }

        // Window dragging functionality
        function makeAppsDraggable() {
            const apps = document.querySelectorAll('.app');
            apps.forEach(app => {
                const header = app.querySelector('.app-header');
                header.addEventListener('mousedown', function(e) {
                    const startX = e.clientX - app.offsetLeft;
                    const startY = e.clientY - app.offsetTop;

                    function moveApp(e) {
                        app.style.left = (e.clientX - startX) + 'px';
                        app.style.top = (e.clientY - startY) + 'px';
                    }

                    function stopMoving() {
                        document.removeEventListener('mousemove', moveApp);
                        document.removeEventListener('mouseup', stopMoving);
                    }

                    document.addEventListener('mousemove', moveApp);
                    document.addEventListener('mouseup', stopMoving);
                });
            });
        }

        // Utility functions
        function getNextZIndex() {
            return Math.max(...Array.from(document.querySelectorAll('.app'))
                .map(app => parseInt(getComputedStyle(app).zIndex) || 0)) + 1;
        }

        function toggleStartMenu() {
            const menu = document.getElementById('start-menu');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }

        function shutdown() {
            document.getElementById('loading-screen').style.display = 'flex';
            document.getElementById('loading-screen').innerHTML = '<h1>Shutting down...</h1>';
            setTimeout(() => {
                window.close();
            }, 500);
        }
// Initialize the app store when the page loads
document.addEventListener('DOMContentLoaded', () => {
    initializeAppStore();
    setupStartMenu();
});

function initializeAppStore() {
    const appList = document.getElementById('available-apps');
    availableApps.forEach(app => {
        const appElement = document.createElement('div');
        appElement.className = 'store-app';
        appElement.innerHTML = `
            <img src="${app.icon}" alt="${app.name}" style="width: 48px; height: 48px;">
            <div>${app.name}</div>
            <button onclick="installApp('${app.id}')">${app.installed ? 'Installed' : 'Install'}</button>
        `;
        appList.appendChild(appElement);
    });
}

function setupStartMenu() {
    const startButton = document.querySelector('.start-button');
    const startMenu = document.getElementById('start-menu');
    
    startButton.addEventListener('click', () => {
        startMenu.style.display = startMenu.style.display === 'none' ? 'block' : 'none';
    });

    // Close menu when clicking outside
    document.addEventListener('click', (e) => {
        if (!startButton.contains(e.target) && !startMenu.contains(e.target)) {
            startMenu.style.display = 'none';
        }
    });
}

function installApp(appId) {
    const app = availableApps.find(a => a.id === appId);
    if (app && !app.installed) {
        app.installed = true;
        installedApps.push(app);
        
        // Create app container
        const appContainer = document.createElement('div');
        appContainer.id = appId;
        appContainer.className = 'app';
        appContainer.innerHTML = app.content;
        document.querySelector('.pad').appendChild(appContainer);
        
        // Create desktop icon
        addAppToDesktop(app);
        
        // Initialize app functionality
        initializeAppFunctionality(appId);
        
        displayOutput('appstore', `Successfully installed ${app.name}`);
    }
}

function addAppToDesktop(app) {
    const desktopIcon = document.createElement('div');
    desktopIcon.className = 'desktop-icon';
    desktopIcon.onclick = () => showApp(app.id);
    desktopIcon.innerHTML = `
        <img src="${app.icon}" alt="${app.name}">
        <div>${app.name}</div>
    `;
    document.querySelector('.pad').appendChild(desktopIcon);
}
function importUserData() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = '.scos';
    input.onchange = (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (event) => {
            const userData = JSON.parse(event.target.result);
            loadUserData(userData);
        };
        reader.readAsText(file);
    };
    input.click();
}

function loadUserData(userData) {
    // Restore installed apps
    userData.installedApps.forEach(app => {
        if (!installedApps.find(a => a.id === app.id)) {
            installApp(app.id);
        }
    });
    
    // Restore memory
    computer.memory = userData.memory;
    displayOutput('memory', 'Account data restored successfully');
}
function initializeAppFunctionality(appId) {
    switch(appId) {
        case 'text-editor':
            initTextEditor();
            break;
        case 'music-player':
            initMusicPlayer();
            break;
        case 'paint':
            initPaint();
            break;
        case 'terminal':
            initTerminal();
            break;
        case 'clock':
            initClock();
            break;
        case 'notes':
            initNotes();
            break;
        case 'calculator-pro':
            initCalculatorPro();
            break;
        case 'file-explorer':
            initFileExplorer();
            break;
        case 'weather':
            initWeather();
            break;
        case 'camera':
            initCamera();
            break;
    }
}

// Text Editor
function initTextEditor() {
    const editor = document.getElementById('editor-content');
    editor.value = localStorage.getItem('editor-content') || '';
    editor.addEventListener('input', () => {
        localStorage.setItem('editor-content', editor.value);
    });
}

// Paint
function initPaint() {
    const canvas = document.getElementById('paint-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = canvas.parentElement.clientWidth - 20;
    canvas.height = 400;
    
    let painting = false;
    const colorPicker = document.getElementById('color-picker');
    const brushSize = document.getElementById('brush-size');

    canvas.addEventListener('mousedown', startPainting);
    canvas.addEventListener('mouseup', stopPainting);
    canvas.addEventListener('mousemove', draw);

    function startPainting(e) {
        painting = true;
        draw(e);
    }

    function stopPainting() {
        painting = false;
        ctx.beginPath();
    }

    function draw(e) {
        if (!painting) return;
        const rect = canvas.getBoundingClientRect();
        ctx.lineWidth = brushSize.value;
        ctx.lineCap = 'round';
        ctx.strokeStyle = colorPicker.value;
        ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
    }
}

// Clock
function initClock() {
    function updateClock() {
        const display = document.getElementById('clock-display');
        const now = new Date();
        display.textContent = now.toLocaleTimeString();
    }
    updateClock();
    setInterval(updateClock, 1000);
}

// Notes
function initNotes() {
    const notesList = document.getElementById('notes-list');
    const notes = JSON.parse(localStorage.getItem('notes') || '[]');
    
    function renderNotes() {
        notesList.innerHTML = notes.map((note, index) => `
            <div class="note">
                ${note}
                <button onclick="deleteNote(${index})">Delete</button>
            </div>
        `).join('');
    }

    window.addNote = function() {
        const input = document.getElementById('new-note');
        if (input.value.trim()) {
            notes.push(input.value);
            localStorage.setItem('notes', JSON.stringify(notes));
            input.value = '';
            renderNotes();
        }
    };

    window.deleteNote = function(index) {
        notes.splice(index, 1);
        localStorage.setItem('notes', JSON.stringify(notes));
        renderNotes();
    };

    renderNotes();
}

// Camera (continued)
function initCamera() {
    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        const video = document.getElementById('camera-feed');
        const canvas = document.getElementById('photo-canvas');
        
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(stream => {
                video.srcObject = stream;
            });

        window.takePhoto = function() {
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            canvas.style.display = 'block';
            
            // Enable photo download
            const link = document.createElement('a');
            link.download = 'photo.png';
            link.href = canvas.toDataURL();
            link.click();
        };
    }
}

// Weather
function initWeather() {
    const API_KEY = 'YOUR_WEATHER_API_KEY'; // Replace with actual API key
    
    window.getWeather = function() {
        const city = document.getElementById('city-input').value;
        const display = document.getElementById('weather-display');
        
        fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`)
            .then(response => response.json())
            .then(data => {
                display.innerHTML = `
                    <h3>${data.name}</h3>
                    <p>Temperature: ${data.main.temp}°C</p>
                    <p>Weather: ${data.weather[0].main}</p>
                    <p>Humidity: ${data.main.humidity}%</p>
                `;
            });
    };
}

// Terminal
function initTerminal() {
    const input = document.getElementById('terminal-input');
    const output = document.getElementById('terminal-output');
    const commands = {
        help: () => 'Available commands: help, clear, echo, date',
        clear: () => output.innerHTML = '',
        echo: (args) => args.join(' '),
        date: () => new Date().toLocaleString()
    };

    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const cmd = input.value.split(' ');
            const command = cmd[0];
            const args = cmd.slice(1);
            
            const result = commands[command] ? 
                commands[command](args) : 
                `Command not found: ${command}`;
            
            output.innerHTML += `<div>> ${input.value}</div>`;
            output.innerHTML += `<div>${result}</div>`;
            
            input.value = '';
            output.scrollTop = output.scrollHeight;
        }
    });
}

// Calculator Pro
function initCalculatorPro() {
    const calculator = document.querySelector('.calculator-grid');
    calculator.innerHTML = `
        <div class="display">0</div>
<br>
        <button onclick="calcInput('1')">1</button>
        <button onclick="calcInput('2')">2</button>
        <button onclick="calcInput('3')">3</button>
        <button onclick="calcInput('4')">4</button>
        <button onclick="calcInput('5')">5</button>
        <button onclick="calcInput('6')">6</button>
        <button onclick="calcInput('7')">7</button>
        <button onclick="calcInput('8')">8</button>
        <button onclick="calcInput('9')">9</button>
        <button onclick="calcInput('0')">0</button>
        <button onclick="calcInput('.')">.</button>
        <p>Operatitons</p>
        <button onclick="calcInput('+')">+</button>
        <button onclick="calcInput('-')">-</button>
        <button onclick="calcInput('*')">×</button>
        <button onclick="calcInput('/')">/</button>
        <button onclick="calculate()">=</button>
    `;
    
    let currentCalculation = '';
    
    window.calcInput = function(value) {
        currentCalculation += value;
        document.querySelector('.display').textContent = currentCalculation;
    };
    
    window.calculate = function() {
        try {
            const result = eval(currentCalculation);
            document.querySelector('.display').textContent = result;
            currentCalculation = result.toString();
        } catch (e) {
            document.querySelector('.display').textContent = 'Error';
            currentCalculation = '';
        }
    };
}

// File Explorer
function initFileExplorer() {
    const fileSystem = document.getElementById('file-system');
    const files = JSON.parse(localStorage.getItem('files') || '{}');
    
    function updateFileSystem() {
        fileSystem.innerHTML = Object.entries(files)
            .map(([name, content]) => `
                <div class="file">
                    ${name}
                    <button onclick="openFile('${name}')">Open</button>
                    <button onclick="deleteFile('${name}')">Delete</button>
                </div>
            `).join('');
    }
    
    window.createFile = function() {
        const name = document.getElementById('new-file-name').value;
        if (name) {
            files[name] = '';
            localStorage.setItem('files', JSON.stringify(files));
            updateFileSystem();
        }
    };
    
    window.openFile = function(name) {
        // Implement file opening logic
        console.log(`Opening file: ${name}`);
    };
    
    window.deleteFile = function(name) {
        delete files[name];
        localStorage.setItem('files', JSON.stringify(files));
        updateFileSystem();
    };
    
    updateFileSystem();
}

// Music Player
function initMusicPlayer() {
    const player = document.getElementById('audio-player');
    const playlist = [
        'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
        'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
        'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3'
    ];
    let currentTrack = 0;
    
    player.src = playlist[currentTrack];
    
    player.addEventListener('ended', () => {
        currentTrack = (currentTrack + 1) % playlist.length;
        player.src = playlist[currentTrack];
        player.play();
    });
}
let installedApps = [];
const computer = {
    memory: {},
    running: true
};

// Initialize the system
document.addEventListener('DOMContentLoaded', () => {
    initializeAppStore();
    setupStartMenu();
    updateCurrentTime();
    makeAppsDraggable();
});

// Update current time in taskbar
function updateCurrentTime() {
    const timeDisplay = document.getElementById('current-date');
    setInterval(() => {
        const now = new Date();
        timeDisplay.textContent = now.toLocaleString();
    }, 1000);
}

// App installation handler
function installApp(appId) {
    const app = availableApps.find(a => a.id === appId);
    if (app && !app.installed) {
        // Show loading animation
        const loadingScreen = createLoadingScreen();
        document.querySelector('.pad').appendChild(loadingScreen);

        setTimeout(() => {
            app.installed = true;
            installedApps.push(app);
            
            // Create and add app container
            const appContainer = document.createElement('div');
            appContainer.id = appId;
            appContainer.className = 'app';
            appContainer.innerHTML = app.content;
            document.querySelector('.pad').appendChild(appContainer);
            
            // Add desktop icon
            addAppToDesktop(app);
            
            // Initialize app functionality
            initializeAppFunctionality(appId);
            
            // Remove loading screen
            loadingScreen.remove();
            
            displayOutput('appstore', `${app.name} installed successfully!`);
            updateAppStore();
        }, 1500);
    }
}

// Create loading screen for app installation
function createLoadingScreen() {
    const loadingScreen = document.createElement('div');
    loadingScreen.className = 'app-loading-screen';
    loadingScreen.innerHTML = `
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    `;
    return loadingScreen;
}

// Display output messages
function displayOutput(appId, message) {
    const outputElement = document.getElementById(`${appId}-output`);
    if (outputElement) {
        outputElement.textContent = message;
    }
}
// Calculator functionality
function compute(operation) {
    const num1 = parseFloat(document.getElementById('num1').value);
    const num2 = parseFloat(document.getElementById('num2').value);
    let result;

    switch(operation) {
        case 'add':
            result = num1 + num2;
            break;
        case 'subtract':
            result = num1 - num2;
            break;
        case 'multiply':
            result = num1 * num2;
            break;
        case 'divide':
            result = num2 !== 0 ? num1 / num2 : 'Cannot divide by zero';
            break;
    }

    document.getElementById('calculator-output').textContent = `Result: ${result}`;
}

// Memory Storage functionality
function setMemory() {
    const key = document.getElementById('memoryKey').value;
    const value = document.getElementById('memoryValue').value;
    
    if (key && value) {
        computer.memory[key] = value;
        document.getElementById('memory-output').textContent = `Saved: ${key} = ${value}`;
    }
}

function getMemory() {
    const key = document.getElementById('memoryKey').value;
    const value = computer.memory[key];
    
    document.getElementById('memory-output').textContent = value ? 
        `Retrieved: ${value} from ${key}` : 
        'Key not found';
}

// Internet functionality
function switchIframe(frameId) {
    const frames = document.querySelectorAll('.iframe-container');
    frames.forEach(frame => frame.classList.remove('active'));
    
    const activeFrame = document.getElementById(`${frameId}-frame`);
    if (activeFrame) {
        activeFrame.classList.add('active');
    }
}

// Games functionality
function openUnblockedCat() {
    const gameFrame = document.getElementById('game-frame');
    gameFrame.src = 'https://joercat.github.io';
    // You can replace the URL with any other game URL you prefer
}
// Add this to your existing JavaScript
document.addEventListener('DOMContentLoaded', () => {
    const startButton = document.querySelector('.start-button');
    startButton.addEventListener('click', () => showApp('set'));
});
function exportUserData() {
    const userData = {
        installedApps,
        memory: computer.memory,
        settings: {
            username: document.getElementById('username').value,
            theme: document.getElementById('theme-selector').value,
            customSettings: localStorage.getItem('customSettings'),
            accountPreferences: {
                language: document.getElementById('language-select')?.value || 'en',
                notifications: document.getElementById('notifications-enabled')?.checked || false,
                autoSave: document.getElementById('auto-save')?.checked || true,
                displayMode: document.getElementById('display-mode')?.value || 'standard'
            },
            systemSettings: {
                startupApps: getStartupApps(),
                taskbarPosition: getTaskbarPosition(),
                desktopLayout: getDesktopLayout()
            }
        }
    };

    const dataStr = JSON.stringify(userData);
    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
    
    const exportLink = document.createElement('a');
    exportLink.setAttribute('href', dataUri);
    exportLink.setAttribute('download', 'user_data.scos');
    exportLink.click();
}

function loadUserData(userData) {
    // Restore installed apps
    userData.installedApps.forEach(app => {
        if (!installedApps.find(a => a.id === app.id)) {
            installApp(app.id);
        }
    });
    
    // Restore memory
    computer.memory = userData.memory;
    
    // Restore settings
    if (userData.settings) {
        // Basic settings
        document.getElementById('username').value = userData.settings.username || '';
        document.getElementById('theme-selector').value = userData.settings.theme || 'default';
        
        // Account preferences
        if (userData.settings.accountPreferences) {
            const prefs = userData.settings.accountPreferences;
            setLanguage(prefs.language);
            setNotifications(prefs.notifications);
            setAutoSave(prefs.autoSave);
            setDisplayMode(prefs.displayMode);
        }
        
        // System settings
        if (userData.settings.systemSettings) {
            const sys = userData.settings.systemSettings;
            setStartupApps(sys.startupApps);
            setTaskbarPosition(sys.taskbarPosition);
            setDesktopLayout(sys.desktopLayout);
        }
        
        if (userData.settings.customSettings) {
            localStorage.setItem('customSettings', userData.settings.customSettings);
        }
        
        changeTheme(); // Apply the restored theme
    }
    
    displayOutput('set', 'Account data restored successfully');
}

// Helper functions for new settings
function getStartupApps() {
    return Array.from(document.querySelectorAll('.startup-app:checked')).map(app => app.value);
}

function getTaskbarPosition() {
    return document.querySelector('input[name="taskbar-position"]:checked')?.value || 'bottom';
}

function getDesktopLayout() {
    return {
        iconSize: document.getElementById('icon-size')?.value || 'medium',
        iconSpacing: document.getElementById('icon-spacing')?.value || 'normal',
        alignment: document.getElementById('desktop-alignment')?.value || 'left'
    };
}

// Setting application functions
function setLanguage(lang) {
    const langSelect = document.getElementById('language-select');
    if (langSelect) langSelect.value = lang;
}

function setNotifications(enabled) {
    const notifToggle = document.getElementById('notifications-enabled');
    if (notifToggle) notifToggle.checked = enabled;
}

function setAutoSave(enabled) {
    const autoSaveToggle = document.getElementById('auto-save');
    if (autoSaveToggle) autoSaveToggle.checked = enabled;
}

function setDisplayMode(mode) {
    const displaySelect = document.getElementById('display-mode');
    if (displaySelect) displaySelect.value = mode;
}

function setStartupApps(apps) {
    apps.forEach(app => {
        const checkbox = document.querySelector(`.startup-app[value="${app}"]`);
        if (checkbox) checkbox.checked = true;
    });
}

function setTaskbarPosition(position) {
    const positionInput = document.querySelector(`input[name="taskbar-position"][value="${position}"]`);
    if (positionInput) positionInput.checked = true;
}

function setDesktopLayout(layout) {
    if (layout.iconSize) document.getElementById('icon-size').value = layout.iconSize;
    if (layout.iconSpacing) document.getElementById('icon-spacing').value = layout.iconSpacing;
    if (layout.alignment) document.getElementById('desktop-alignment').value = layout.alignment;
}

</script>
</body>
</html>
